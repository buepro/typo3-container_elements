<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      data-namespace-typo3-fluid="true">

<f:layout name="Default" />

<f:section name="Main">
    {f:variable(name: '_activeItemIndex', value: data.pi_flexform.activeItemIndex)}
    {f:variable(name: '_activeItemIndex', value: 1) -> v:condition.variable.isNull(value: _activeItemIndex)}
    <div class="accordion {f:if(condition:'{data.pi_flexform.style}', then:'{data.pi_flexform.style}')}"
         id="accordion-{data.uid}">
        <f:for each="{children_101}" as="record" iteration="iterator">
            <div class="accordion-item card">
                <div id="accordion-heading-{record.uid}" class="accordion-header card-header">
                    <h4 class="accordion-title">
                        <a class="accordion-title-link {f:if(condition:'{iterator.cycle} != {_activeItemIndex}', then:'collapsed')}"
                           href="#accordion-{record.uid}"
                           data-toggle="collapse" data-parent="#accordion-{data.uid}"
                           aria-expanded="{f:if(condition:'{iterator.cycle} == {_activeItemIndex}', then:'true', else:'false')}"
                           aria-controls="accordion-{record.uid}">
                            <span class="accordion-title-link-text">{record.header}</span>
                            <span class="accordion-title-link-state"></span>
                        </a>
                    </h4>
                </div>
                <div id="accordion-{record.uid}"
                     class="accordion-collapse collapse {f:if(condition:'{iterator.cycle} == {_activeItemIndex}', then:'show')}"
                     aria-labelledby="accordion-heading-{record.uid}"
                     data-parent="#accordion-{data.uid}">
                    <div class="ce-accordion-body accordion-body card-body">
                        <f:format.raw>{record.renderedContent}</f:format.raw>
                    </div>
                </div>
            </div>
        </f:for>
    </div>
</f:section>
</html>
